<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>axios的封装 | 阿龙的小型博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="along,along's Blog">
  
  <meta name="description" content="vue中Axios的封装和API接口的管理 如图，面对一团糟代码的你~~~真的想说，What F~U~C~K！！！ 回归正题，我们所要的说的axios的封装和api接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。 一、axios的封装在vue项目中，和后台交互获取数据这块，我们通常使用的是axios库，它是基于promise的http库，可运行在浏览器端和node.js中。">
<meta name="keywords" content="javascript,vue,axios">
<meta property="og:type" content="article">
<meta property="og:title" content="axios的封装">
<meta property="og:url" content="https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/index.html">
<meta property="og:site_name" content="阿龙的小型博客">
<meta property="og:description" content="vue中Axios的封装和API接口的管理 如图，面对一团糟代码的你~~~真的想说，What F~U~C~K！！！ 回归正题，我们所要的说的axios的封装和api接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。 一、axios的封装在vue项目中，和后台交互获取数据这块，我们通常使用的是axios库，它是基于promise的http库，可运行在浏览器端和node.js中。">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://wll-1017065322.github.io/myBlog/2019/07/28/axios的封装/assets/164c70852f41b04c">
<meta property="og:image" content="https://wll-1017065322.github.io/myBlog/2019/07/28/axios的封装/assets/1651349e0864bee4">
<meta property="og:updated_time" content="2019-10-28T08:06:35.970Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="axios的封装">
<meta name="twitter:description" content="vue中Axios的封装和API接口的管理 如图，面对一团糟代码的你~~~真的想说，What F~U~C~K！！！ 回归正题，我们所要的说的axios的封装和api接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。 一、axios的封装在vue项目中，和后台交互获取数据这块，我们通常使用的是axios库，它是基于promise的http库，可运行在浏览器端和node.js中。">
<meta name="twitter:image" content="https://wll-1017065322.github.io/myBlog/2019/07/28/axios的封装/assets/164c70852f41b04c">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/myBlog/css/style.css">
  <script src="/myBlog/js/pace.min.js"></script>
  

  
  

</head>
</html>
<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/myBlog/" class="left">
                    <span class="site-title">along&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a href="/myBlog/">
                        <i class="fa fa-home"></i>
                        <span>主页</span>
                    </a>
                    
                    <a href="/myBlog/archives">
                        <i class="fa fa-archive"></i>
                        <span>档案</span>
                    </a>
                    
                    <a href="/myBlog/about">
                        <i class="fa fa-user"></i>
                        <span>个人信息</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/myBlog/">
                    <img src="/myBlog/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        along&#39;s Blog
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        但行前路，莫问前途
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="along’s website" target="_blank" href="http://www.wanglvlong.top/">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/WLL-1017065322">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="Weixin" target="_blank" href="//baidu.com">
                            <i class="fa fa-weixin fa-2x"></i></a>
                    
                        <a title="QQ" target="_blank" href="//qq.com">
                            <i class="fa fa-qq fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-axios的封装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      axios的封装
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/myBlog/categories/vue/">vue</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2019-07-28
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h1 id="vue中Axios的封装和API接口的管理"><a href="#vue中Axios的封装和API接口的管理" class="headerlink" title="vue中Axios的封装和API接口的管理"></a>vue中Axios的封装和API接口的管理</h1><p><img src="assets/164c70852f41b04c" alt="img"></p>
<p>如图，面对一团糟代码的你~~~真的想说，What F~U~C~K！！！</p>
<p>回归正题，我们所要的说的axios的封装和api接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。</p>
<h2 id="一、axios的封装"><a href="#一、axios的封装" class="headerlink" title="一、axios的封装"></a>一、axios的封装</h2><p>在vue项目中，和后台交互获取数据这块，我们通常使用的是axios库，它是基于promise的http库，可运行在浏览器端和node.js中。他有很多优秀的特性，例如拦截请求和响应、取消请求、转换json、客户端防御XSRF等。所以我们的尤大大也是果断放弃了对其官方库vue-resource的维护，直接推荐我们使用axios库。如果还对axios不了解的，可以移步<a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Faxios" target="_blank" rel="noopener">axios文档</a>。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios; // 安装axios复制代码</span><br></pre></td></tr></table></figure>
<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>一般我会在项目的src目录中，新建一个request文件夹，然后在里面新建一个http.js和一个api.js文件。http.js文件用来封装我们的axios，api.js用来统一管理我们的接口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 在http.js中引入axios</span><br><span class="line">import axios from &apos;axios&apos;; // 引入axios</span><br><span class="line">import QS from &apos;qs&apos;; // 引入qs模块，用来序列化post类型的数据，后面会提到</span><br><span class="line">// vant的toast提示框组件，大家可根据自己的ui组件更改。</span><br><span class="line">import &#123; Toast &#125; from &apos;vant&apos;; </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h3 id="环境的切换"><a href="#环境的切换" class="headerlink" title="环境的切换"></a>环境的切换</h3><p>我们的项目环境可能有开发环境、测试环境和生产环境。我们通过node的环境变量来匹配我们的默认的接口url前缀。axios.defaults.baseURL可以设置axios的默认请求地址就不多说了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 环境的切换</span><br><span class="line">if (process.env.NODE_ENV == &apos;development&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;https://www.baidu.com&apos;;&#125; </span><br><span class="line">else if (process.env.NODE_ENV == &apos;debug&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;https://www.ceshi.com&apos;;</span><br><span class="line">&#125; </span><br><span class="line">else if (process.env.NODE_ENV == &apos;production&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;https://www.production.com&apos;;</span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<h3 id="设置请求超时"><a href="#设置请求超时" class="headerlink" title="设置请求超时"></a>设置请求超时</h3><p>通过axios.defaults.timeout设置默认的请求超时时间。例如超过了10s，就会告知用户当前请求超时，请刷新等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.timeout = 10000;复制代码</span><br></pre></td></tr></table></figure>
<h3 id="post请求头的设置"><a href="#post请求头的设置" class="headerlink" title="post请求头的设置"></a>post请求头的设置</h3><p>post请求的时候，我们需要加上一个请求头，所以可以在这里进行一个默认的设置，即设置post的请求头为<code>application/x-www-form-urlencoded;charset=UTF-8</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded;charset=UTF-8&apos;;复制代码</span><br></pre></td></tr></table></figure>
<ul>
<li>请求拦截</li>
</ul>
<p>我们在发送请求前可以进行一个请求的拦截，为什么要拦截呢，我们拦截请求是用来做什么的呢？比如，有些请求是需要用户登录之后才能访问的，或者post请求的时候，我们需要序列化我们提交的数据。这时候，我们可以在请求被发送之前进行一个拦截，从而进行我们想要的操作。</p>
<h3 id="请求拦截"><a href="#请求拦截" class="headerlink" title="请求拦截"></a>请求拦截</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 先导入vuex,因为我们要使用到里面的状态对象</span><br><span class="line">// vuex的路径根据自己的路径去写</span><br><span class="line">import store from &apos;@/store/index&apos;;</span><br><span class="line"></span><br><span class="line">// 请求拦截器axios.interceptors.request.use(    </span><br><span class="line">    config =&gt; &#123;        </span><br><span class="line">        // 每次发送请求之前判断vuex中是否存在token        </span><br><span class="line">        // 如果存在，则统一在http请求的header都加上token，这样后台根据token判断你的登录情况</span><br><span class="line">        // 即使本地存在token，也有可能token是过期的，所以在响应拦截器中要对返回状态进行判断 </span><br><span class="line">        const token = store.state.token;        </span><br><span class="line">        token &amp;&amp; (config.headers.Authorization = token);        </span><br><span class="line">        return config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    error =&gt; &#123;        </span><br><span class="line">        return Promise.error(error);    </span><br><span class="line">&#125;)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>这里说一下token，一般是在登录完成之后，将用户的token通过localStorage或者cookie存在本地，然后用户每次在进入页面的时候（即在main.js中），会首先从本地存储中读取token，如果token存在说明用户已经登陆过，则更新vuex中的token状态。然后，在每次请求接口的时候，都会在请求的header中携带token，后台人员就可以根据你携带的token来判断你的登录是否过期，如果没有携带，则说明没有登录过。这时候或许有些小伙伴会有疑问了，就是每个请求都携带token，那么要是一个页面不需要用户登录就可以访问的怎么办呢？其实，你前端的请求可以携带token，但是后台可以选择不接收啊！</p>
<h3 id="响应的拦截"><a href="#响应的拦截" class="headerlink" title="响应的拦截"></a>响应的拦截</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">// 响应拦截器</span><br><span class="line">axios.interceptors.response.use(    </span><br><span class="line">    response =&gt; &#123;   </span><br><span class="line">        // 如果返回的状态码为200，说明接口请求成功，可以正常拿到数据     </span><br><span class="line">        // 否则的话抛出错误</span><br><span class="line">        if (response.status === 200) &#123;            </span><br><span class="line">            return Promise.resolve(response);        </span><br><span class="line">        &#125; else &#123;            </span><br><span class="line">            return Promise.reject(response);        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    // 服务器状态码不是2开头的的情况</span><br><span class="line">    // 这里可以跟你们的后台开发人员协商好统一的错误状态码    </span><br><span class="line">    // 然后根据返回的状态码进行一些操作，例如登录过期提示，错误提示等等</span><br><span class="line">    // 下面列举几个常见的操作，其他需求可自行扩展</span><br><span class="line">    error =&gt; &#123;            </span><br><span class="line">        if (error.response.status) &#123;            </span><br><span class="line">            switch (error.response.status) &#123;                </span><br><span class="line">                // 401: 未登录</span><br><span class="line">                // 未登录则跳转登录页面，并携带当前页面的路径</span><br><span class="line">                // 在登录成功后返回当前页面，这一步需要在登录页操作。                </span><br><span class="line">                case 401:                    </span><br><span class="line">                    router.replace(&#123;                        </span><br><span class="line">                        path: &apos;/login&apos;,                        </span><br><span class="line">                        query: &#123; </span><br><span class="line">                            redirect: router.currentRoute.fullPath </span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    break;</span><br><span class="line"></span><br><span class="line">                // 403 token过期</span><br><span class="line">                // 登录过期对用户进行提示</span><br><span class="line">                // 清除本地token和清空vuex中token对象</span><br><span class="line">                // 跳转登录页面                </span><br><span class="line">                case 403:</span><br><span class="line">                     Toast(&#123;</span><br><span class="line">                        message: &apos;登录过期，请重新登录&apos;,</span><br><span class="line">                        duration: 1000,</span><br><span class="line">                        forbidClick: true</span><br><span class="line">                    &#125;);</span><br><span class="line">                    // 清除token</span><br><span class="line">                    localStorage.removeItem(&apos;token&apos;);</span><br><span class="line">                    store.commit(&apos;loginSuccess&apos;, null);</span><br><span class="line">                    // 跳转登录页面，并将要浏览的页面fullPath传过去，登录成功后跳转需要访问的页面 </span><br><span class="line">                    setTimeout(() =&gt; &#123;                        </span><br><span class="line">                        router.replace(&#123;                            </span><br><span class="line">                            path: &apos;/login&apos;,                            </span><br><span class="line">                            query: &#123; </span><br><span class="line">                                redirect: router.currentRoute.fullPath </span><br><span class="line">                            &#125;                        </span><br><span class="line">                        &#125;);                    </span><br><span class="line">                    &#125;, 1000);                    </span><br><span class="line">                    break; </span><br><span class="line"></span><br><span class="line">                // 404请求不存在</span><br><span class="line">                case 404:</span><br><span class="line">                    Toast(&#123;</span><br><span class="line">                        message: &apos;网络请求不存在&apos;,</span><br><span class="line">                        duration: 1500,</span><br><span class="line">                        forbidClick: true</span><br><span class="line">                    &#125;);</span><br><span class="line">                    break;</span><br><span class="line">                // 其他错误，直接抛出错误提示</span><br><span class="line">                default:</span><br><span class="line">                    Toast(&#123;</span><br><span class="line">                        message: error.response.data.message,</span><br><span class="line">                        duration: 1500,</span><br><span class="line">                        forbidClick: true</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            return Promise.reject(error.response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;);复制代码</span><br></pre></td></tr></table></figure>
<p>响应拦截器很好理解，就是服务器返回给我们的数据，我们在拿到之前可以对他进行一些处理。例如上面的思想：如果后台返回的状态码是200，则正常返回数据，否则的根据错误的状态码类型进行一些我们需要的错误，其实这里主要就是进行了错误的统一处理和没登录或登录过期后调整登录页的一个操作。</p>
<p><strong>要注意的是，上面的Toast()方法，是我引入的vant库中的toast轻提示组件，你根据你的ui库，对应使用你的一个提示组件。</strong></p>
<h3 id="封装get方法和post方法"><a href="#封装get方法和post方法" class="headerlink" title="封装get方法和post方法"></a>封装get方法和post方法</h3><p>我们常用的ajax请求方法有get、post、put等方法，相信小伙伴都不会陌生。axios对应的也有很多类似的方法，不清楚的可以看下文档。但是为了简化我们的代码，我们还是要对其进行一个简单的封装。下面我们主要封装两个方法：get和post。</p>
<p><strong>get方法</strong>：我们通过定义一个get函数，get函数有两个参数，第一个参数表示我们要请求的url地址，第二个参数是我们要携带的请求参数。get函数返回一个promise对象，当axios其请求成功时resolve服务器返回 值，请求失败时reject错误值。最后通过export抛出get函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * get方法，对应get请求</span><br><span class="line"> * @param &#123;String&#125; url [请求的url地址]</span><br><span class="line"> * @param &#123;Object&#125; params [请求时携带的参数]</span><br><span class="line"> */</span><br><span class="line">export function get(url, params)&#123;    </span><br><span class="line">    return new Promise((resolve, reject) =&gt;&#123;        </span><br><span class="line">        axios.get(url, &#123;            </span><br><span class="line">            params: params        </span><br><span class="line">        &#125;).then(res =&gt; &#123;</span><br><span class="line">            resolve(res.data);</span><br><span class="line">        &#125;).catch(err =&gt;&#123;</span><br><span class="line">            reject(err.data)        </span><br><span class="line">    &#125;)    </span><br><span class="line">&#125;);&#125;复制代码</span><br></pre></td></tr></table></figure>
<p><strong>post方法：</strong>原理同get基本一样，但是要注意的是，post方法必须要使用对提交从参数对象进行序列化的操作，所以这里我们通过node的qs模块来序列化我们的参数。这个很重要，如果没有序列化操作，后台是拿不到你提交的数据的。这就是文章开头我们import QS from ‘qs’;的原因。如果不明白序列化是什么意思的，就百度一下吧，答案一大堆。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * post方法，对应post请求 </span><br><span class="line"> * @param &#123;String&#125; url [请求的url地址] </span><br><span class="line"> * @param &#123;Object&#125; params [请求时携带的参数] </span><br><span class="line"> */</span><br><span class="line">export function post(url, params) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">         axios.post(url, QS.stringify(params))</span><br><span class="line">        .then(res =&gt; &#123;</span><br><span class="line">            resolve(res.data);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(err =&gt;&#123;</span><br><span class="line">            reject(err.data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<p>这里有个小细节说下，<code>axios.get()</code>方法和<code>axios.post()</code>在提交数据时参数的书写方式还是有区别的。区别就是，get的第二个参数是一个{}，然后这个对象的params属性值是一个参数对象的。而post的第二个参数就是一个参数对象。两者略微的区别要留意哦！</p>
<p><img src="assets/1651349e0864bee4" alt="img"></p>
<h2 id="axios的封装基本就完成了，下面再简单说下api的统一管理。"><a href="#axios的封装基本就完成了，下面再简单说下api的统一管理。" class="headerlink" title="axios的封装基本就完成了，下面再简单说下api的统一管理。"></a>axios的封装基本就完成了，下面再简单说下api的统一管理。</h2><p>整齐的api就像电路板一样，即使再复杂也能很清晰整个线路。上面说了，我们会新建一个api.js,然后在这个文件中存放我们所有的api接口。</p>
<ul>
<li>首先我们在api.js中引入我们封装的get和post方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**   </span><br><span class="line"> * api接口统一管理</span><br><span class="line"> */</span><br><span class="line">import &#123; get, post &#125; from &apos;./http&apos;复制代码</span><br></pre></td></tr></table></figure>
<p>现在，例如我们有这样一个接口，是一个post请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.baiodu.com/api/v1/users/my_address/address_edit_before复制代码</span><br></pre></td></tr></table></figure>
<p>我们可以在api.js中这样封装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const apiAddress = p =&gt; post(&apos;api/v1/users/my_address/address_edit_before&apos;, p);复制代码</span><br></pre></td></tr></table></figure>
<p>我们定义了一个<code>apiAddress</code>方法，这个方法有一个参数p，p是我们请求接口时携带的参数对象。而后调用了我们封装的<code>post</code>方法，<code>post</code>方法的第一个参数是我们的接口地址，第二个参数是<code>apiAddress</code>的p参数，即请求接口时携带的参数对象。最后通过export导出<code>apiAddress</code>。</p>
<p>然后在我们的页面中可以这样调用我们的api接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; apiAddress &#125; from &apos;@/request/api&apos;;// 导入我们的api接口</span><br><span class="line">export default &#123;        </span><br><span class="line">    name: &apos;Address&apos;,    </span><br><span class="line">    created () &#123;</span><br><span class="line">        this.onLoad();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;            </span><br><span class="line">        // 获取数据            </span><br><span class="line">        onLoad() &#123;</span><br><span class="line">            // 调用api接口，并且提供了两个参数                </span><br><span class="line">            apiAddress(&#123;                    </span><br><span class="line">                type: 0,                    </span><br><span class="line">                sort: 1                </span><br><span class="line">            &#125;).then(res =&gt; &#123;</span><br><span class="line">                // 获取数据成功后的其他操作</span><br><span class="line">                ………………                </span><br><span class="line">            &#125;)            </span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<p>其他的api接口，就在pai.js中继续往下面扩展就可以了。友情提示，为每个接口写好注释哦！！！</p>
<p>api接口管理的一个好处就是，我们把api统一集中起来，如果后期需要修改接口，我们就直接在api.js中找到对应的修改就好了，而不用去每一个页面查找我们的接口然后再修改会很麻烦。关键是，万一修改的量比较大，就规格gg了。还有就是如果直接在我们的业务代码修改接口，一不小心还容易动到我们的业务代码造成不必要的麻烦。</p>
<p>好了，最后把完成的axios封装代码奉上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">/**axios封装</span><br><span class="line"> * 请求拦截、相应拦截、错误统一处理</span><br><span class="line"> */</span><br><span class="line">import axios from &apos;axios&apos;;import QS from &apos;qs&apos;;</span><br><span class="line">import &#123; Toast &#125; from &apos;vant&apos;;</span><br><span class="line">import store from &apos;../store/index&apos;</span><br><span class="line"></span><br><span class="line">// 环境的切换</span><br><span class="line">if (process.env.NODE_ENV == &apos;development&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;/api&apos;;</span><br><span class="line">&#125; else if (process.env.NODE_ENV == &apos;debug&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;&apos;;</span><br><span class="line">&#125; else if (process.env.NODE_ENV == &apos;production&apos;) &#123;    </span><br><span class="line">    axios.defaults.baseURL = &apos;http://api.123dailu.com/&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 请求超时时间</span><br><span class="line">axios.defaults.timeout = 10000;</span><br><span class="line"></span><br><span class="line">// post请求头</span><br><span class="line">axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded;charset=UTF-8&apos;;</span><br><span class="line"></span><br><span class="line">// 请求拦截器</span><br><span class="line">axios.interceptors.request.use(    </span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">        // 每次发送请求之前判断是否存在token，如果存在，则统一在http请求的header都加上token，不用每次请求都手动添加了</span><br><span class="line">        // 即使本地存在token，也有可能token是过期的，所以在响应拦截器中要对返回状态进行判断</span><br><span class="line">        const token = store.state.token;        </span><br><span class="line">        token &amp;&amp; (config.headers.Authorization = token);        </span><br><span class="line">        return config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    error =&gt; &#123;        </span><br><span class="line">        return Promise.error(error);    </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">// 响应拦截器</span><br><span class="line">axios.interceptors.response.use(    </span><br><span class="line">    response =&gt; &#123;        </span><br><span class="line">        if (response.status === 200) &#123;            </span><br><span class="line">            return Promise.resolve(response);        </span><br><span class="line">        &#125; else &#123;            </span><br><span class="line">            return Promise.reject(response);        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;,</span><br><span class="line">    // 服务器状态码不是200的情况    </span><br><span class="line">    error =&gt; &#123;        </span><br><span class="line">        if (error.response.status) &#123;            </span><br><span class="line">            switch (error.response.status) &#123;                </span><br><span class="line">                // 401: 未登录                </span><br><span class="line">                // 未登录则跳转登录页面，并携带当前页面的路径                </span><br><span class="line">                // 在登录成功后返回当前页面，这一步需要在登录页操作。                </span><br><span class="line">                case 401:                    </span><br><span class="line">                    router.replace(&#123;                        </span><br><span class="line">                        path: &apos;/login&apos;,                        </span><br><span class="line">                        query: &#123; redirect: router.currentRoute.fullPath &#125; </span><br><span class="line">                    &#125;);</span><br><span class="line">                    break;</span><br><span class="line">                // 403 token过期                </span><br><span class="line">                // 登录过期对用户进行提示                </span><br><span class="line">                // 清除本地token和清空vuex中token对象                </span><br><span class="line">                // 跳转登录页面                </span><br><span class="line">                case 403:                     </span><br><span class="line">                    Toast(&#123;                        </span><br><span class="line">                        message: &apos;登录过期，请重新登录&apos;,                        </span><br><span class="line">                        duration: 1000,                        </span><br><span class="line">                        forbidClick: true                    </span><br><span class="line">                    &#125;);                    </span><br><span class="line">                    // 清除token                    </span><br><span class="line">                    localStorage.removeItem(&apos;token&apos;);                    </span><br><span class="line">                    store.commit(&apos;loginSuccess&apos;, null);                    </span><br><span class="line">                    // 跳转登录页面，并将要浏览的页面fullPath传过去，登录成功后跳转需要访问的页面</span><br><span class="line">                    setTimeout(() =&gt; &#123;                        </span><br><span class="line">                        router.replace(&#123;                            </span><br><span class="line">                            path: &apos;/login&apos;,                            </span><br><span class="line">                            query: &#123; </span><br><span class="line">                                redirect: router.currentRoute.fullPath </span><br><span class="line">                            &#125;                        </span><br><span class="line">                        &#125;);                    </span><br><span class="line">                    &#125;, 1000);                    </span><br><span class="line">                    break; </span><br><span class="line">                // 404请求不存在                </span><br><span class="line">                case 404:                    </span><br><span class="line">                    Toast(&#123;                        </span><br><span class="line">                        message: &apos;网络请求不存在&apos;,                        </span><br><span class="line">                        duration: 1500,                        </span><br><span class="line">                        forbidClick: true                    </span><br><span class="line">                    &#125;);                    </span><br><span class="line">                break;                </span><br><span class="line">                // 其他错误，直接抛出错误提示                </span><br><span class="line">                default:                    </span><br><span class="line">                    Toast(&#123;                        </span><br><span class="line">                        message: error.response.data.message,                        </span><br><span class="line">                        duration: 1500,                        </span><br><span class="line">                        forbidClick: true                    </span><br><span class="line">                    &#125;);            </span><br><span class="line">            &#125;            </span><br><span class="line">            return Promise.reject(error.response);        </span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">/** </span><br><span class="line"> * get方法，对应get请求 </span><br><span class="line"> * @param &#123;String&#125; url [请求的url地址] </span><br><span class="line"> * @param &#123;Object&#125; params [请求时携带的参数] </span><br><span class="line"> */</span><br><span class="line">export function get(url, params)&#123;    </span><br><span class="line">    return new Promise((resolve, reject) =&gt;&#123;        </span><br><span class="line">        axios.get(url, &#123;            </span><br><span class="line">            params: params        </span><br><span class="line">        &#125;)        </span><br><span class="line">        .then(res =&gt; &#123;            </span><br><span class="line">            resolve(res.data);        </span><br><span class="line">        &#125;)        </span><br><span class="line">        .catch(err =&gt; &#123;            </span><br><span class="line">            reject(err.data)        </span><br><span class="line">        &#125;)    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">/** </span><br><span class="line"> * post方法，对应post请求 </span><br><span class="line"> * @param &#123;String&#125; url [请求的url地址] </span><br><span class="line"> * @param &#123;Object&#125; params [请求时携带的参数] </span><br><span class="line"> */</span><br><span class="line">export function post(url, params) &#123;    </span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;         </span><br><span class="line">        axios.post(url, QS.stringify(params))        </span><br><span class="line">        .then(res =&gt; &#123;            </span><br><span class="line">            resolve(res.data);        </span><br><span class="line">        &#125;)        </span><br><span class="line">        .catch(err =&gt; &#123;            </span><br><span class="line">            reject(err.data)        </span><br><span class="line">        &#125;)    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>如果喜欢，就给个❤❤吧(<em>^▽^</em>)</p>
<p><strong><strong>*</strong></strong>华丽丽的分割线<strong><strong><strong><strong>**</strong></strong></strong></strong>华丽丽的分割线<strong><strong><strong><strong>**</strong></strong></strong></strong>华丽丽的分割线<strong><strong><strong><strong>**</strong></strong></strong></strong>华丽丽的分割线<strong><strong><strong><strong>**</strong></strong></strong></strong>华丽丽的分割线<strong><strong>*</strong></strong></p>
<h2 id="2018-8-14更新"><a href="#2018-8-14更新" class="headerlink" title="2018.8.14更新"></a>2018.8.14更新</h2><p>axios的封装根据需求的不同而不同。这里非常感谢评论里一些很中肯的建议，我也对此进行了思考和针对不同需求的改善。主要有以下改变：</p>
<p><strong>1.优化axios封装，去掉之前的get和post</strong></p>
<p><strong>2.断网情况处理</strong></p>
<p><strong>3.更加模块化的api管理</strong></p>
<p><strong>4.接口域名有多个的情况</strong></p>
<p><strong>5.api挂载到vue.prototype上省去引入的步骤</strong></p>
<p>http.js中axios封装的优化，先直接贴代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * axios封装</span><br><span class="line"> * 请求拦截、响应拦截、错误统一处理</span><br><span class="line"> */</span><br><span class="line">import axios from &apos;axios&apos;;</span><br><span class="line">import router from &apos;../router&apos;;</span><br><span class="line">import store from &apos;../store/index&apos;;</span><br><span class="line">import &#123; Toast &#125; from &apos;vant&apos;;</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> * 提示函数 </span><br><span class="line"> * 禁止点击蒙层、显示一秒后关闭</span><br><span class="line"> */</span><br><span class="line">const tip = msg =&gt; &#123;    </span><br><span class="line">    Toast(&#123;        </span><br><span class="line">        message: msg,        </span><br><span class="line">        duration: 1000,        </span><br><span class="line">        forbidClick: true    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> * 跳转登录页</span><br><span class="line"> * 携带当前页面路由，以期在登录页面完成登录后返回当前页面</span><br><span class="line"> */</span><br><span class="line">const toLogin = () =&gt; &#123;</span><br><span class="line">    router.replace(&#123;</span><br><span class="line">        path: &apos;/login&apos;,        </span><br><span class="line">        query: &#123;</span><br><span class="line">            redirect: router.currentRoute.fullPath</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> * 请求失败后的错误统一处理 </span><br><span class="line"> * @param &#123;Number&#125; status 请求失败的状态码</span><br><span class="line"> */</span><br><span class="line">const errorHandle = (status, other) =&gt; &#123;</span><br><span class="line">    // 状态码判断</span><br><span class="line">    switch (status) &#123;</span><br><span class="line">        // 401: 未登录状态，跳转登录页</span><br><span class="line">        case 401:</span><br><span class="line">            toLogin();</span><br><span class="line">            break;</span><br><span class="line">        // 403 token过期</span><br><span class="line">        // 清除token并跳转登录页</span><br><span class="line">        case 403:</span><br><span class="line">            tip(&apos;登录过期，请重新登录&apos;);</span><br><span class="line">            localStorage.removeItem(&apos;token&apos;);</span><br><span class="line">            store.commit(&apos;loginSuccess&apos;, null);</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                toLogin();</span><br><span class="line">            &#125;, 1000);</span><br><span class="line">            break;</span><br><span class="line">        // 404请求不存在</span><br><span class="line">        case 404:</span><br><span class="line">            tip(&apos;请求的资源不存在&apos;); </span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            console.log(other);   </span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line">// 创建axios实例</span><br><span class="line">var instance = axios.create(&#123;    timeout: 1000 * 12&#125;);</span><br><span class="line">// 设置post请求头</span><br><span class="line">instance.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded&apos;;</span><br><span class="line">/** </span><br><span class="line"> * 请求拦截器 </span><br><span class="line"> * 每次请求前，如果存在token则在请求头中携带token </span><br><span class="line"> */ </span><br><span class="line">instance.interceptors.request.use(    </span><br><span class="line">    config =&gt; &#123;        </span><br><span class="line">        // 登录流程控制中，根据本地是否存在token判断用户的登录情况        </span><br><span class="line">        // 但是即使token存在，也有可能token是过期的，所以在每次的请求头中携带token        </span><br><span class="line">        // 后台根据携带的token判断用户的登录情况，并返回给我们对应的状态码        </span><br><span class="line">        // 而后我们可以在响应拦截器中，根据状态码进行一些统一的操作。        </span><br><span class="line">        const token = store.state.token;        </span><br><span class="line">        token &amp;&amp; (config.headers.Authorization = token);        </span><br><span class="line">        return config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    error =&gt; Promise.error(error))</span><br><span class="line"></span><br><span class="line">// 响应拦截器</span><br><span class="line">instance.interceptors.response.use(    </span><br><span class="line">    // 请求成功</span><br><span class="line">    res =&gt; res.status === 200 ? Promise.resolve(res) : Promise.reject(res),    </span><br><span class="line">    // 请求失败</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        const &#123; response &#125; = error;</span><br><span class="line">        if (response) &#123;</span><br><span class="line">            // 请求已发出，但是不在2xx的范围 </span><br><span class="line">            errorHandle(response.status, response.data.message);</span><br><span class="line">            return Promise.reject(response);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 处理断网的情况</span><br><span class="line">            // eg:请求超时或断网时，更新state的network状态</span><br><span class="line">            // network状态在app.vue中控制着一个全局的断网提示组件的显示隐藏</span><br><span class="line">            // 关于断网组件中的刷新重新获取数据，会在断网组件中说明</span><br><span class="line">            if (!window.navigator.onLine) &#123;</span><br><span class="line">               store.commit(&apos;changeNetwork&apos;, false);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return Promise.reject(error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">export default instance;复制代码</span><br></pre></td></tr></table></figure>
<p>这个axios和之前的大同小异，做了如下几点改变：</p>
<p>1.去掉了之前get和post方法的封装，通过创建一个axios实例然后export default方法导出，这样使用起来更灵活一些。</p>
<p>2.去掉了通过环境变量控制baseUrl的值。考虑到接口会有多个不同域名的情况，所以准备通过js变量来控制接口域名。这点具体在api里会介绍。</p>
<p>3.增加了请求超时，即断网状态的处理。说下思路，当断网时，通过更新vuex中network的状态来控制断网提示组件的显示隐藏。断网提示一般会有重新加载数据的操作，这步会在后面对应的地方介绍。</p>
<p>4.公用函数进行抽出，简化代码，尽量保证单一职责原则。</p>
<p><strong>下面说下api这块，考虑到一下需求：</strong></p>
<p>1.更加模块化</p>
<p>2.更方便多人开发，有效减少解决命名冲突</p>
<p>3.处理接口域名有多个情况</p>
<p>这里这里呢新建了一个api文件夹，里面有一个index.js和一个base.js，以及多个根据模块划分的接口js文件。index.js是一个api的出口，base.js管理接口域名，其他js则用来管理各个模块的接口。</p>
<p>先放index.js代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * api接口的统一出口</span><br><span class="line"> */</span><br><span class="line">// 文章模块接口</span><br><span class="line">import article from &apos;@/api/article&apos;;</span><br><span class="line">// 其他模块的接口……</span><br><span class="line"></span><br><span class="line">// 导出接口</span><br><span class="line">export default &#123;    </span><br><span class="line">    article,</span><br><span class="line">    // ……</span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<p>index.js是一个api接口的出口，这样就可以把api接口根据功能划分为多个模块，利于多人协作开发，比如一个人只负责一个模块的开发等，还能方便每个模块中接口的命名哦。</p>
<p>base.js:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 接口域名的管理</span><br><span class="line"> */</span><br><span class="line">const base = &#123;    </span><br><span class="line">    sq: &apos;https://xxxx111111.com/api/v1&apos;,    </span><br><span class="line">    bd: &apos;http://xxxxx22222.com/api&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default base;复制代码</span><br></pre></td></tr></table></figure>
<p>通过base.js来管理我们的接口域名，不管有多少个都可以通过这里进行接口的定义。即使修改起来，也是很方便的。</p>
<p>最后就是接口模块的说明，例如上面的article.js:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * article模块接口列表</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import base from &apos;./base&apos;; // 导入接口域名列表</span><br><span class="line">import axios from &apos;@/utils/http&apos;; // 导入http中创建的axios实例</span><br><span class="line">import qs from &apos;qs&apos;; // 根据需求是否导入qs模块</span><br><span class="line"></span><br><span class="line">const article = &#123;    </span><br><span class="line">    // 新闻列表    </span><br><span class="line">    articleList () &#123;        </span><br><span class="line">        return axios.get(`$&#123;base.sq&#125;/topics`);    </span><br><span class="line">    &#125;,    </span><br><span class="line">    // 新闻详情,演示    </span><br><span class="line">    articleDetail (id, params) &#123;        </span><br><span class="line">        return axios.get(`$&#123;base.sq&#125;/topic/$&#123;id&#125;`, &#123;            </span><br><span class="line">            params: params        </span><br><span class="line">        &#125;);    </span><br><span class="line">    &#125;,</span><br><span class="line">    // post提交    </span><br><span class="line">    login (params) &#123;        </span><br><span class="line">        return axios.post(`$&#123;base.sq&#125;/accesstoken`, qs.stringify(params));    </span><br><span class="line">    &#125;</span><br><span class="line">    // 其他接口…………</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default article;复制代码</span><br></pre></td></tr></table></figure>
<p>1.通过直接引入我们封装好的axios实例，然后定义接口、调用axios实例并返回，可以更灵活的使用axios，比如你可以对post请求时提交的数据进行一个qs序列化的处理等。</p>
<p>2.请求的配置更灵活，你可以针对某个需求进行一个不同的配置。关于配置的优先级，axios文档说的很清楚，这个顺序是：在 <code>lib/defaults.js</code> 找到的库的默认值，然后是实例的 <code>defaults</code> 属性，最后是请求的 <code>config</code> 参数。后者将优先于前者。</p>
<p>3.restful风格的接口，也可以通过这种方式灵活的设置api接口地址。</p>
<p>最后，为了方便api的调用，我们需要将其挂载到vue的原型上。在main.js中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import router from &apos;./router&apos; // 导入路由文件</span><br><span class="line">import store from &apos;./store&apos; // 导入vuex文件</span><br><span class="line">import api from &apos;./api&apos; // 导入api接口</span><br><span class="line"></span><br><span class="line">Vue.prototype.$api = api; // 将api挂载到vue的原型上复制代码</span><br></pre></td></tr></table></figure>
<p>然后我们可以在页面中这样调用接口，eg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;    </span><br><span class="line">    onLoad(id) &#123;      </span><br><span class="line">        this.$api.article.articleDetail(id, &#123;        </span><br><span class="line">            api: 123      </span><br><span class="line">        &#125;).then(res=&gt; &#123;</span><br><span class="line">            // 执行某些操作      </span><br><span class="line">        &#125;)    </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<p>再提一下断网的处理，这里只做一个简单的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;  </span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;    </span><br><span class="line">        &lt;div v-if=&quot;!network&quot;&gt;      </span><br><span class="line">            &lt;h3&gt;我没网了&lt;/h3&gt;      </span><br><span class="line">            &lt;div @click=&quot;onRefresh&quot;&gt;刷新&lt;/div&gt;      </span><br><span class="line">        &lt;/div&gt;    </span><br><span class="line">        &lt;router-view/&gt;      </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123; mapState &#125; from &apos;vuex&apos;;</span><br><span class="line">    export default &#123;  </span><br><span class="line">        name: &apos;App&apos;,  </span><br><span class="line">        computed: &#123;    </span><br><span class="line">            ...mapState([&apos;network&apos;])  </span><br><span class="line">        &#125;,  </span><br><span class="line">        methods: &#123;    </span><br><span class="line">            // 通过跳转一个空页面再返回的方式来实现刷新当前页面数据的目的</span><br><span class="line">            onRefresh () &#123;      </span><br><span class="line">                this.$router.replace(&apos;/refresh&apos;)    </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;复制代码</span><br></pre></td></tr></table></figure>
<p>这是app.vue，这里简单演示一下断网。在http.js中介绍了，我们会在断网的时候，来更新vue中network的状态，那么这里我们根据network的状态来判断是否需要加载这个断网组件。断网情况下，加载断网组件，不加载对应页面的组件。当点击刷新的时候，我们通过跳转refesh页面然后立即返回的方式来实现重新获取数据的操作。因此我们需要新建一个refresh.vue页面，并在其<code>beforeRouteEnter</code>钩子中再返回当前页面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// refresh.vue</span><br><span class="line">beforeRouteEnter (to, from, next) &#123;</span><br><span class="line">    next(vm =&gt; &#123;            </span><br><span class="line">        vm.$router.replace(from.fullPath)        </span><br><span class="line">    &#125;)    </span><br><span class="line">&#125;复制代码</span><br></pre></td></tr></table></figure>
<p>这是一种全局通用的断网提示，当然了，也可以根据自己的项目需求操作。具体操作就仁者见仁智者见智了。</p>
<p>如果更多的需求，或者说是不一样的需求，可以根据自己的需求进行一个改进。</p>

            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2019年10月28日 16:06</p>
        <p>原始链接： <a class="post-url" href="/myBlog/2019/07/28/axios的封装/" title="axios的封装">https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/</a></p>
        <footer>
            <a href="https://WLL-1017065322.github.io/myBlog">
                <img src="/myBlog/images/logo.png" alt="along">
                along
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        多谢打赏
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/myBlog/images/wechat_code.jpg" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            <label class="reward-select-item checked" data-id="wechat" data-wechat="/myBlog/images/wechat_code.jpg">
                <img class="reward-select-item-wechat" src="/myBlog/images/wechat.png" alt="微信">
            </label>
            
            
            <label class="reward-select-item" data-id="alipay" data-alipay="/myBlog/images/alipay_code.jpg">
                <img class="reward-select-item-alipay" src="/myBlog/images/alipay.png" alt="支付宝">
            </label>
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/&title=《axios的封装》 — 阿龙的小型博客&pic=/images/banner.jpg" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/&title=《axios的封装》 — 阿龙的小型博客&source=" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《axios的封装》 — 阿龙的小型博客&url=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/&via=https://WLL-1017065322.github.io/myBlog" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://WLL-1017065322.github.io/myBlog/2019/07/28/axios的封装/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/myBlog/tags/javascript/" class="color1">javascript</a>
      
    <a href="/myBlog/tags/vue/" class="color4">vue</a>
      
    <a href="/myBlog/tags/axios/" class="color1">axios</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#vue中Axios的封装和API接口的管理"><span class="post-toc-text">vue中Axios的封装和API接口的管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、axios的封装"><span class="post-toc-text">一、axios的封装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装"><span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引入"><span class="post-toc-text">引入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#环境的切换"><span class="post-toc-text">环境的切换</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置请求超时"><span class="post-toc-text">设置请求超时</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#post请求头的设置"><span class="post-toc-text">post请求头的设置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请求拦截"><span class="post-toc-text">请求拦截</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#响应的拦截"><span class="post-toc-text">响应的拦截</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#封装get方法和post方法"><span class="post-toc-text">封装get方法和post方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#axios的封装基本就完成了，下面再简单说下api的统一管理。"><span class="post-toc-text">axios的封装基本就完成了，下面再简单说下api的统一管理。</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2018-8-14更新"><span class="post-toc-text">2018.8.14更新</span></a></li></ol></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/myBlog/2019/07/30/axios错误统一封装/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          axios错误统一封装
        
      </span>
    </a>
  
  
    <a href="/myBlog/2019/07/25/vue axios封装/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">vue axios封装</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2020 along<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://WLL-1017065322.github.io/myBlog",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/myBlog/categories/First/">First</a><a class="category-link" href="/myBlog/categories/canvas/">canvas</a><a class="category-link" href="/myBlog/categories/css/">css</a><a class="category-link" href="/myBlog/categories/hexo/">hexo</a><a class="category-link" href="/myBlog/categories/java/">java</a><a class="category-link" href="/myBlog/categories/javascript/">javascript</a><a class="category-link" href="/myBlog/categories/js/">js</a><a class="category-link" href="/myBlog/categories/node/">node</a><a class="category-link" href="/myBlog/categories/python/">python</a><a class="category-link" href="/myBlog/categories/vue/">vue</a><a class="category-link" href="/myBlog/categories/上线/">上线</a><a class="category-link" href="/myBlog/categories/其他/">其他</a><a class="category-link" href="/myBlog/categories/数据库/">数据库</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/myBlog/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/myBlog/tags/Selenium/" style="font-size: 10px;">Selenium</a> <a href="/myBlog/tags/WebDriverWait/" style="font-size: 10px;">WebDriverWait</a> <a href="/myBlog/tags/axios/" style="font-size: 16.67px;">axios</a> <a href="/myBlog/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/myBlog/tags/chrome/" style="font-size: 11.67px;">chrome</a> <a href="/myBlog/tags/clientHeight/" style="font-size: 10px;">clientHeight</a> <a href="/myBlog/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/myBlog/tags/css/" style="font-size: 11.67px;">css</a> <a href="/myBlog/tags/eslint/" style="font-size: 11.67px;">eslint</a> <a href="/myBlog/tags/export/" style="font-size: 10px;">export</a> <a href="/myBlog/tags/flex/" style="font-size: 10px;">flex</a> <a href="/myBlog/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/myBlog/tags/java/" style="font-size: 10px;">java</a> <a href="/myBlog/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/myBlog/tags/javascrpit/" style="font-size: 10px;">javascrpit</a> <a href="/myBlog/tags/js/" style="font-size: 13.33px;">js</a> <a href="/myBlog/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/myBlog/tags/mongod/" style="font-size: 11.67px;">mongod</a> <a href="/myBlog/tags/nginx/" style="font-size: 11.67px;">nginx</a> <a href="/myBlog/tags/node/" style="font-size: 13.33px;">node</a> <a href="/myBlog/tags/pm2/" style="font-size: 10px;">pm2</a> <a href="/myBlog/tags/python/" style="font-size: 10px;">python</a> <a href="/myBlog/tags/session/" style="font-size: 10px;">session</a> <a href="/myBlog/tags/this/" style="font-size: 10px;">this</a> <a href="/myBlog/tags/vue/" style="font-size: 18.33px;">vue</a> <a href="/myBlog/tags/vue-cli/" style="font-size: 10px;">vue-cli</a> <a href="/myBlog/tags/vue-router/" style="font-size: 15px;">vue-router</a> <a href="/myBlog/tags/vuex/" style="font-size: 10px;">vuex</a> <a href="/myBlog/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/myBlog/tags/定时器/" style="font-size: 10px;">定时器</a> <a href="/myBlog/tags/数据库/" style="font-size: 11.67px;">数据库</a> <a href="/myBlog/tags/数组/" style="font-size: 11.67px;">数组</a> <a href="/myBlog/tags/瀑布流/" style="font-size: 10px;">瀑布流</a> <a href="/myBlog/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/myBlog/tags/组件/" style="font-size: 10px;">组件</a> <a href="/myBlog/tags/跨域/" style="font-size: 11.67px;">跨域</a> <a href="/myBlog/tags/部署上线/" style="font-size: 16.67px;">部署上线</a> <a href="/myBlog/tags/问题/" style="font-size: 16.67px;">问题</a> <a href="/myBlog/tags/项目/" style="font-size: 11.67px;">项目</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a href="/myBlog/">
                    <i class="fa fa-home"></i><span>主页</span>
                </a>
            </li>
            
            <li>
                <a href="/myBlog/archives">
                    <i class="fa fa-archive"></i><span>档案</span>
                </a>
            </li>
            
            <li>
                <a href="/myBlog/about">
                    <i class="fa fa-user"></i><span>个人信息</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/myBlog/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/myBlog/tags/Selenium/" style="font-size: 10px;">Selenium</a> <a href="/myBlog/tags/WebDriverWait/" style="font-size: 10px;">WebDriverWait</a> <a href="/myBlog/tags/axios/" style="font-size: 16.67px;">axios</a> <a href="/myBlog/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/myBlog/tags/chrome/" style="font-size: 11.67px;">chrome</a> <a href="/myBlog/tags/clientHeight/" style="font-size: 10px;">clientHeight</a> <a href="/myBlog/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/myBlog/tags/css/" style="font-size: 11.67px;">css</a> <a href="/myBlog/tags/eslint/" style="font-size: 11.67px;">eslint</a> <a href="/myBlog/tags/export/" style="font-size: 10px;">export</a> <a href="/myBlog/tags/flex/" style="font-size: 10px;">flex</a> <a href="/myBlog/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/myBlog/tags/java/" style="font-size: 10px;">java</a> <a href="/myBlog/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/myBlog/tags/javascrpit/" style="font-size: 10px;">javascrpit</a> <a href="/myBlog/tags/js/" style="font-size: 13.33px;">js</a> <a href="/myBlog/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/myBlog/tags/mongod/" style="font-size: 11.67px;">mongod</a> <a href="/myBlog/tags/nginx/" style="font-size: 11.67px;">nginx</a> <a href="/myBlog/tags/node/" style="font-size: 13.33px;">node</a> <a href="/myBlog/tags/pm2/" style="font-size: 10px;">pm2</a> <a href="/myBlog/tags/python/" style="font-size: 10px;">python</a> <a href="/myBlog/tags/session/" style="font-size: 10px;">session</a> <a href="/myBlog/tags/this/" style="font-size: 10px;">this</a> <a href="/myBlog/tags/vue/" style="font-size: 18.33px;">vue</a> <a href="/myBlog/tags/vue-cli/" style="font-size: 10px;">vue-cli</a> <a href="/myBlog/tags/vue-router/" style="font-size: 15px;">vue-router</a> <a href="/myBlog/tags/vuex/" style="font-size: 10px;">vuex</a> <a href="/myBlog/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/myBlog/tags/定时器/" style="font-size: 10px;">定时器</a> <a href="/myBlog/tags/数据库/" style="font-size: 11.67px;">数据库</a> <a href="/myBlog/tags/数组/" style="font-size: 11.67px;">数组</a> <a href="/myBlog/tags/瀑布流/" style="font-size: 10px;">瀑布流</a> <a href="/myBlog/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/myBlog/tags/组件/" style="font-size: 10px;">组件</a> <a href="/myBlog/tags/跨域/" style="font-size: 11.67px;">跨域</a> <a href="/myBlog/tags/部署上线/" style="font-size: 16.67px;">部署上线</a> <a href="/myBlog/tags/问题/" style="font-size: 16.67px;">问题</a> <a href="/myBlog/tags/项目/" style="font-size: 11.67px;">项目</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/myBlog/js/search.js"></script>
<script src="/myBlog/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/myBlog/js/particles.js"></script>







  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  <script src="/myBlog/js/animate.js"></script>


  <script src="/myBlog/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>